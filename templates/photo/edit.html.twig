{% extends 'base.html.twig' %}

{% block title %}Edit Photo - QwePic{% endblock %}

{% block body %}
<div class="min-h-screen bg-gray-50 py-12">
    <div class="max-w-2xl mx-auto px-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-space-cadet mb-2">Edit Photo</h1>
            <p class="text-slate-gray">Update your photo details</p>
        </div>

        <!-- Current Photo Preview -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
            <h3 class="text-lg font-semibold text-space-cadet mb-4">Current Photo</h3>
            <div class="flex items-start gap-6">
                <div class="flex-shrink-0">
                    {% if photo.thumbnails and photo.thumbnails.medium %}
                        <img src="{{ asset('uploads/thumbnails/' ~ photo.thumbnails.medium) }}" 
                             alt="{{ photo.title }}" 
                             class="w-32 h-32 object-cover rounded-lg">
                    {% else %}
                        <img src="{{ asset('uploads/photos/' ~ photo.src) }}" 
                             alt="{{ photo.title }}" 
                             class="w-32 h-32 object-cover rounded-lg">
                    {% endif %}
                </div>
                <div class="flex-grow">
                    <h4 class="font-semibold text-space-cadet mb-2">{{ photo.title }}</h4>
                    {% if photo.description %}
                        <p class="text-slate-gray text-sm mb-2">{{ photo.description }}</p>
                    {% endif %}
                    <p class="text-xs text-slate-gray">Uploaded {{ photo.createdAt|date('M j, Y') }}</p>
                </div>
            </div>
        </div>

        <!-- Edit Form -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
            {{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'class': 'space-y-6'}}) }}
            
            <!-- Photo Upload (Optional) -->
            <div class="space-y-2">
                <label class="block text-sm font-semibold text-space-cadet">{{ form_label(form.src) }}</label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-vivid-sky-blue transition-colors duration-300">
                    <svg class="w-10 h-10 mx-auto text-gray-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <p class="text-gray-600 mb-2">Replace photo (optional)</p>
                    <p class="text-sm text-gray-500">Leave empty to keep current photo</p>
                    {{ form_widget(form.src) }}
                </div>
                {{ form_errors(form.src) }}
            </div>

            <!-- Title -->
            <div class="space-y-2">
                <label class="block text-sm font-semibold text-space-cadet">{{ form_label(form.title) }}</label>
                {{ form_widget(form.title) }}
                {{ form_errors(form.title) }}
            </div>

            <!-- Description -->
            <div class="space-y-2">
                <label class="block text-sm font-semibold text-space-cadet">{{ form_label(form.description) }}</label>
                {{ form_widget(form.description) }}
                {{ form_errors(form.description) }}
            </div>

            <!-- Album Selection -->
            <div class="space-y-2">
                <label class="block text-sm font-semibold text-space-cadet">{{ form_label(form.album) }}</label>
                {{ form_widget(form.album) }}
                {{ form_errors(form.album) }}
                <p class="text-sm text-gray-500">Change album or leave empty for public feed</p>
            </div>

            <!-- Public Checkbox -->
            <div class="flex items-center space-x-3">
                {{ form_widget(form.isPublic) }}
                <label class="text-sm font-medium text-space-cadet">{{ form_label(form.isPublic) }}</label>
                {{ form_errors(form.isPublic) }}
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4 pt-6">
                <button type="submit"
                        class="flex-1 px-6 py-3 bg-vivid-sky-blue text-white font-semibold rounded-lg hover:bg-blue-500 transition-all duration-300 hover:shadow-lg">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    Save Changes
                </button>
                <a href="{{ path('app_photo_show', {'id': photo.id}) }}" 
                   class="px-6 py-3 border border-gray-300 text-slate-gray font-semibold rounded-lg hover:bg-gray-50 transition-all duration-300">
                    Cancel
                </a>
            </div>

            {{ form_end(form) }}
        </div>

        <!-- Tips Section -->
        {# <div class="mt-8 bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-space-cadet mb-3">✏️ Editing Tips</h3>
            <ul class="space-y-2 text-sm text-slate-gray">
                <li>• Upload a new photo to replace the current one</li>
                <li>• Update title and description to improve discoverability</li>
                <li>• Change album assignment or visibility settings</li>
                <li>• Leave photo upload empty to keep the current image</li>
            </ul>
        </div> #}
    </div>
</div>
{% endblock %}